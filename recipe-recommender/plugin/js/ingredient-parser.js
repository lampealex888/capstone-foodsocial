function ingredient_parser(ingredients) {
    const natural = require("natural");
    const tokenizer = new natural.WordTokenizer();
    const measures = [
        "teaspoon",
        "t",
        "tsp",
        "tablespoon",
        "t",
        "tbl",
        "tb",
        "tbsp",
        "fluid ounc",
        "fl oz",
        "gill",
        "cup",
        "c",
        "pint",
        "p",
        "pt",
        "fl pt",
        "quart",
        "q",
        "qt",
        "fl qt",
        "gallon",
        "g",
        "gal",
        "ml",
        "millilit",
        "millilitr",
        "cc",
        "ml",
        "l",
        "liter",
        "litr",
        "l",
        "dl",
        "decilit",
        "decilitr",
        "dl",
        "bulb",
        "level",
        "heap",
        "round",
        "whole",
        "pinch",
        "medium",
        "slice",
        "pound",
        "lb",
        "",
        "ounc",
        "oz",
        "mg",
        "milligram",
        "milligramm",
        "g",
        "gram",
        "gramm",
        "kg",
        "kilogram",
        "kilogramm",
        "x",
        "of",
        "mm",
        "millimetr",
        "millimet",
        "cm",
        "centimet",
        "centimetr",
        "m",
        "meter",
        "metr",
        "inch",
        "in",
        "milli",
        "centi",
        "deci",
        "hecto",
        "kilo",
    ];
    const wordsToRemove = [
        "fresh",
        "oil",
        "a",
        "red",
        "bunch",
        "and",
        "clove",
        "or",
        "leaf",
        "chilli",
        "larg",
        "extra",
        "sprig",
        "ground",
        "hand",
        "free",
        "small",
        "pepper",
        "virgin",
        "rang",
        "from",
        "dri",
        "sustain",
        "black",
        "peel",
        "higher",
        "welfar",
        "seed",
        "for",
        "fine",
        "freshli",
        "sea",
        "qualiti",
        "white",
        "ripe",
        "few",
        "piec",
        "sourc",
        "to",
        "organ",
        "flat",
        "smoke",
        "ginger",
        "slice",
        "green",
        "pick",
        "the",
        "stick",
        "plain",
        "plu",
        "mix",
        "mint",
        "bai",
        "basil",
        "your",
        "cumin",
        "option",
        "fennel",
        "serv",
        "mustard",
        "unsalt",
        "babi",
        "paprika",
        "fat",
        "ask",
        "natur",
        "skin",
        "roughli",
        "into",
        "such",
        "cut",
        "good",
        "brown",
        "grate",
        "trim",
        "oregano",
        "powder",
        "yellow",
        "dust",
        "knob",
        "frozen",
        "on",
        "deseed",
        "low",
        "runni",
        "balsam",
        "cook",
        "streaki",
        "nutmeg",
        "sage",
        "rasher",
        "zest",
        "pin",
        "groundnut",
        "breadcrumb",
        "turmer",
        "halv",
        "grate",
        "stalk",
        "light",
        "tin",
        "dry",
        "soft",
        "rocket",
        "bone",
        "colour",
        "wash",
        "skinless",
        "leftov",
        "splash",
        "remov",
        "dijon",
        "thick",
        "big",
        "hot",
        "drain",
        "size",
        "chestnut",
        "watercress",
        "fishmong",
        "english",
        "dill",
        "caper",
        "raw",
        "worcestershir",
        "flake",
        "cider",
        "cayenn",
        "tbsp",
        "leg",
        "pine",
        "wild",
        "if",
        "fine",
        "herb",
        "almond",
        "shoulder",
        "cube",
        "dress",
        "with",
        "chunk",
        "spice",
        "thumb",
        "garam",
        "new",
        "littl",
        "punnet",
        "peppercorn",
        "shell",
        "saffron",
        "other",
        "chop",
        "salt",
        "oliv",
        "tast",
        "can",
        "sauc",
        "water",
        "dice",
        "packag",
        "italian",
        "shred",
        "divid",
        "parslei",
        "vinegar",
        "all",
        "purpos",
        "crush",
        "juic",
        "more",
        "coriand",
        "bell",
        "need",
        "thinli",
        "boneless",
        "half",
        "thyme",
        "cube",
        "cinnamon",
        "cilantro",
        "jar",
        "season",
        "rosemari",
        "extract",
        "sweet",
        "bake",
        "beaten",
        "heavi",
        "seed",
        "tin",
        "vanilla",
        "uncook",
        "crumb",
        "style",
        "thin",
        "nut",
        "coars",
        "spring",
        "chili",
        "cornstarch",
        "strip",
        "cardamom",
        "rins",
        "honei",
        "cherri",
        "root",
        "quarter",
        "head",
        "soften",
        "contain",
        "crumbl",
        "fry",
        "lean",
        "cook",
        "roast",
        "warm",
        "whip",
        "thaw",
        "corn",
        "pit",
        "sun",
        "kosher",
        "bite",
        "toast",
        "lasagna",
        "split",
        "melt",
        "degre",
        "lengthwis",
        "romano",
        "pack",
        "pod",
        "anchovi",
        "rom",
        "prepar",
        "juic",
        "fluid",
        "floret",
        "room",
        "activ",
        "season",
        "mix",
        "devein",
        "lightli",
        "anis",
        "thai",
        "size",
        "unsweeten",
        "torn",
        "wedg",
        "sour",
        "basmati",
        "marinara",
        "dark",
        "temperatur",
        "garnish",
        "bouillon",
        "loaf",
        "shell",
        "reggiano",
        "canola",
        "parmigiano",
        "round",
        "can",
        "ghee",
        "crust",
        "long",
        "broken",
        "ketchup",
        "bulk",
        "clean",
        "condens",
        "sherri",
        "provolon",
        "cold",
        "soda",
        "cottag",
        "sprai",
        "tamarind",
        "pecorino",
        "shorten",
        "part",
        "bottl",
        "sodium",
        "cocoa",
        "grain",
        "french",
        "roast",
        "stem",
        "link",
        "firm",
        "asafoetida",
        "mild",
        "dash",
        "boil",
        "sugar",
        "section",
        "ingredi",
    ];

    /* We first get rid of all the punctuation. */
    const punctuationRegex = /[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g;
    ingredients.map((ingredient) => ingredient.replace(punctuationRegex, ""));

    const ingredList = [];
    for (const i of ingredients) {
        let items = i;
        items = tokenizer.tokenize(items);
        items = items.filter((word) => /^[a-zA-Z]+$/.test(word));
        items = items.map((word) => word.toLowerCase());
        items = items.map((word) => natural.PorterStemmer.stem(word));
        items = items.filter((word) => !measures.includes(word));
        items = items.filter((word) => !wordsToRemove.includes(word));
        if (items.length) {
            ingredList.push(items.join(" "));
        }
    }
    const ingredListString = ingredList.join(" ");
    return ingredListString;
}

export { ingredient_parser };

function test_ingredient_parser() {
    const fs = require("fs");
    const recipesData = fs.readFileSync("../data/recipes.json", "utf8");
    const recipes = JSON.parse(recipesData);
    const firstRecipe = recipes["112565"];
    console.log(ingredient_parser(firstRecipe.ingredients));
}